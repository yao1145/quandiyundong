# 圈地运动

《圈地运动》是一款基于HTML5 Canvas开发的休闲竞技游戏。玩家通过控制角色移动，在地图上留下轨迹，并尝试圈占更多领地。游戏融合了经典的贪吃蛇玩法与领地争夺元素，提供多种游戏模式和难度选择，带来独特的游戏体验。

## 游戏特色

-   **直观的控制**：通过键盘方向键或W/A/S/D控制角色移动。
-   **领地争夺**：在地图上绘制轨迹，形成闭合区域即可圈占领地。
-   **多种游戏模式**：提供五大模式，游戏模式多样。
-   **可调节难度**：提供慢速、中速、快速、闪电四种速度选择，适应不同玩家。
-   **个性化颜色**：多种颜色选项，选择你喜欢的颜色进行游戏。
-   **精美界面**：科幻风格的UI设计，带来沉浸式体验。

## 如何开始游戏

1.  **打开 `index.html`**：在浏览器中直接打开项目根目录下的 `index.html` 文件。
2.  **选择游戏精度**：你可以选择high、low两种精度，这取决于你的设备性能。
    high精度下，游戏运行更流畅，但可能会占用更多的系统资源。low精度下，游戏运行可能会卡顿，但对系统资源的占用较少。
3.  **选择颜色、速度和模式**：在主菜单界面，你可以选择你喜欢的玩家颜色、游戏速度和游戏模式。
4.  **开始游戏**：点击“开始游戏”按钮，即可进入游戏。
5.  **画布大小**：由于游戏canvas的默认大小为1200*600，所以请确保你的浏览器窗口大小足够大，否则游戏界面可能会被裁剪。可以通过缩放浏览器窗口来调整大小，以获得良好的游戏体验。

## 游戏玩法

-   **移动**：使用键盘方向键（玩家2）或W/A/S/D键（玩家1）控制角色移动。
-   **圈占领地**：当你的角色移动时，会留下彩色的轨迹。当你将轨迹连接成一个闭合的区域时，该区域内的空白领地将被你圈占。
-   **生存**：避免撞到自己的轨迹、其他玩家的轨迹或地图边缘。在对战模式中，你会有有限的生命值。
-   **道具**：游戏中会随机出现各种道具，拾取它们可以获得增益效果（例如增加轨迹长度）。

## 游戏控制

-   **玩家1**：
    -   上：`W`
    -   下：`S`
    -   左：`A`
    -   右：`D`
-   **玩家2**：
    -   上：`↑` (ArrowUp)
    -   下：`↓` (ArrowDown)
    -   左：`←` (ArrowLeft)
    -   右：`→` (ArrowRight)
-   **暂停/恢复**：`Space` 键
-   **退出游戏**：`Esc` 键

## 基本规则

- **轨迹**：玩家有一定长度的轨迹, 移动时会留下自己颜色的轨迹。
- **圈地**：圈地轨迹头回到家后与尾相连，形成封闭区域后可以占领该区域。
- **死亡**：碰到对手的轨迹会使自己或对手死亡,这取决于游戏模式。进入对手的领土会死亡。被AI碰撞会死亡。在夺旗模式下未及时回到出生点会死亡。可以在控制台观察死亡方式。
- **胜利**：先判断生命值（需生命值大于0），再判断旗帜数量（夺旗模式），最后判断领土大小。若三者均相同，则为平局。
- **规定时间**：游戏规定时间内，玩家需要圈占更多区域才能获胜。无限模式不规定时间。
- **AI**：有三种模式：漫游、追逐与放松模式，漫游模式下在画布内游荡，在玩家进入攻击范围后会进入追逐模式，追逐模式下会追逐玩家。攻击到玩家后会进入5秒钟的放松模式，不追逐玩家。

## 各游戏模式介绍

### 1. 探索模式

- 碰到对手的轨迹会死亡
- 进入对手的领土会死亡
- 每个人只有1条生命
- 规定时间内占领更多区域的玩家获胜

### 2. 对战模式

- 碰到对手的轨迹会杀死对手
- 进入对手的领土同样会死亡
- 每个人有3条生命
- 生命归零后即死亡
- 规定时间内占领更多区域的玩家获胜

### 3. 无限模式

- 游戏模式与对战模式类似
- 拥有无限生命，但每次死亡后都会有5秒钟的封锁时间
- 每死亡一次，封锁时间增加2秒钟
- 第一个占领60%区域的玩家获胜

### 4. 生存模式

- AI会追击玩家，被追上就死亡
- 每个人有3条生命，生命归零后即死亡
- AI碰撞玩家后会有5秒钟的休息时间，不再追逐玩家
- 可以使用护盾来躲避AI进攻
- 规定时间内占领更多区域的玩家获胜

### 5. 夺旗模式

- 地图上会生成旗帜区域
- 旗帜属于最后一个圈到旗帜的玩家
- 每隔玩家离开出生点后15秒内需要回到出生点
- 未及时回到出生点的玩家会直接死亡
- 需要圈住并守住旗帜，先比较旗帜数量再比较领土面积
- 规定时间内占领更多旗帜的玩家获胜

### 6. 昼夜模式
- 每20秒进行一次昼夜循环
- 前5秒渐变变黑，中间10秒完全黑暗，后5秒渐变变亮
- 夜晚时画布变黑，左上角和右下角会出现月亮
- 玩家在夜晚时可以继续移动和游戏
- 碰撞机制与对战模式相同，碰到对手轨迹会杀死对手
- 每个人有3条生命，生命归零后即死亡
- 规定时间内占领更多区域的玩家获胜

## 道具说明

- **速度**（绿色 ⚡）：增加移动速度
- **长度**（黄色 📏）：增加轨迹长度
- **护盾**（蓝色 🛡️）：保护自己可以进入对方领土，同时保护自己不被AI杀死
- **障碍**：阻挡移动,一次会有多个同时生成
- **临时栏杆**：开局12秒后消失

## 文件结构

```
. 
├── index.html          # 游戏主页面，包含UI和Canvas元素
├── icon.png            # 游戏图标
├── css\
    ├── main.css        # 主CSS文件，导入所有样式模块
    ├── bases\          # 基础样式文件
    │   ├── base.css           # 基础重置和全局样式
    │   ├── background.css     # 科幻背景样式
    │   ├── components.css     # 通用容器和标题样式
    │   ├── buttons.css        # 按钮基础样式
    │   └── forms.css          # 表单和下拉选择器样式
    └── pages\          # 页面特殊样式文件
        ├── color-picker.css   # 颜色选择器页面样式
        ├── rules.css          # 游戏说明页面样式
        ├── games.css          # 游戏页面样式
        ├── game-ui.css        # 游戏UI元素样式
        └── overlays.css       # 覆盖层和弹窗样式
├── js\
    ├── Config.js       # 游戏配置文件，包含各种参数设置
    ├── core\           # 游戏核心模块
    │   ├── GameEngine.js       # 游戏核心逻辑，包括物理更新、渲染循环
    │   ├── InputHandler.js     # 处理用户输入，如键盘事件
    │   ├── Renderer.js         # 渲染器，负责游戏元素的绘制
    │   └── main.js             # 游戏初始化和主要流程控制
    ├── objects\        # 游戏对象模块
    │   ├── Player.js           # 玩家角色逻辑，包括移动、轨迹、碰撞检测等
    │   ├── Territory.js        # 领地管理，处理领地的圈占和判断
    │   ├── ItemManager.js      # 道具管理，包括生成和应用道具效果
    │   └── UIManager.js        # UI管理器，负责更新游戏界面信息
    └── modes\           # 游戏模式模块
        ├── Survive.js          # 生存模式的处理模块，包括AI设置等
        ├── DayNight.js         # 昼夜模式的处理模块，包括昼夜循环等
        └── Flag.js             # 夺旗模式的处理模块，包括旗帜的生成等

```

## 开发与贡献

本项目是一个基于Web前端技术的游戏，如果你对代码感兴趣，可以通过以下方式进行：

-   **克隆仓库**：将项目克隆到本地。
-   **修改代码**：你可以尝试修改`Config.js`，以获得多样的游戏体验。
-   **提交PR**：如果你有好的改进，欢迎提交Pull Request。

## 游戏开发者

-   **开发者**：
    -   姓名：yaozitao
    -   邮箱：TamarraElsheikh377@gmail.com
    -   GitHub：[yao1145] https://github.com/yao1145
